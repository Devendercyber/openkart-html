<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>

<meta charset="UTF-8" />
<title> Edit User</title>
<link rel="icon" type="image/x-icon" href="../../uploads/images/1645186822_2377a38d68aab0717ea4.png">
<base >
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="Flipspaces">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- DEBUG-VIEW START 1 APPPATH/Views/admin/header.php -->
<link href="../assets/backend/stylesheet/bootstrap.css" type="text/css" rel="stylesheet" />
<script type="text/javascript" src="../assets/backend/javascript/jquery/jquery-2.1.1.min.js"></script> 
<!-- <script type="text/javascript" src="assets/backend/javascript/jquery.min.js"></script> -->
<script type="text/javascript" src="../assets/backend/javascript/bootstrap/js/bootstrap.min.js"></script>
<link href="../assets/backend/javascript/font-awesome/css/font-awesome.min.css" type="text/css" rel="stylesheet" />
<script src="../assets/backend/javascript/jquery/datetimepicker/moment/moment.min.js" type="text/javascript"></script>
<script src="../assets/backend/javascript/jquery/datetimepicker/moment/moment-with-locales.min.js" type="text/javascript"></script>
<script src="../assets/backend/javascript/jquery/datetimepicker/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
<link href="../assets/backend/javascript/jquery/datetimepicker/bootstrap-datetimepicker.min.css" type="text/css" rel="stylesheet" media="screen" />
<link type="text/css" href="../assets/backend/stylesheet/stylesheet.css" rel="stylesheet" media="screen" />
<link type="text/css" href="../assets/frontend/css/toastr.css" rel="stylesheet" />

 <script src="../assets/backend/javascript/common.js" type="text/javascript"></script>
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->

<!-- ckeditor -->

<!-- <script src="http://cyberworx.co.in/flipspaces_new/assets/ckeditor/ckeditor.js"></script>
<script src="http://cyberworx.co.in/flipspaces_new/assets/ckfinder/ckfinder.js"></script> -->

<!-- select 2 -->
<!-- select 2 -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>

<!-- datatable -->
<link href="../../../../cdn.datatables.net/1.10.22/css/jquery.dataTables.min.css" rel="stylesheet" />

<script src="../../../../cdn.datatables.net/1.10.22/js/jquery.dataTables.min.js"></script>

<link type="text/css" href="../assets/backend/stylesheet/custom.css" rel="stylesheet" media="screen" />

 </head>



 <body>
  <div id="container">
   <header id="header" class="navbar navbar-static-top">
    <div class="container-fluid">
     <div id="header-logo" class="navbar-header">
      <a href="../dashboard.html" class="navbar-brand"><img src="../../uploads/images/1645186822_15c6f1d2110fbb4e9f38.png" alt="cyberworx" title="cyberworx" style="width: 109px;margin-top: -10px;" /></a>
     </div>
     <a href="#" id="button-menu" class="hidden-md hidden-lg"><span class="fa fa-bars"></span></a>

     <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
       <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        <img src="../../uploads/images/1642223944_122d6a644e5ee28f83be.jpg" alt="cyberworx" title="admin" id="user-profile" class="img-circle"  style="width: 50px;" />cyberworx <i class="fa fa-caret-down fa-fw"></i>
       </a>
       <ul class="dropdown-menu dropdown-menu-right">
        <li>
         <a href="../profile.html"><i class="fa fa-user-circle-o fa-fw"></i> Your Profile</a>
        </li>
        
        <li>
         <a href="http://cyberworx.co.in/flipspaces_new/home" target="_blank"><i class="fa fa-dashboard fa-fw"></i> Website Homepage</a>
        </li>
       
       </ul>
      </li>
      <li>
       <a href="http://cyberworx.co.in/flipspaces_new/admin_console"><i class="fa fa-sign-out"></i> <span class="hidden-xs hidden-sm hidden-md">Logout</span></a>
      </li>
     </ul>
    </div>
   </header>
   <nav id="column-left">
    <div id="navigation"><span class="fa fa-bars"></span> Navigation</div>
    <ul id="menu">
     
 
    
   
     <li id="menu-dashboard">
      <a href="../dashboard.html"><i class="fa fa-dashboard fw"></i> Dashboard</a>
     </li>

  

       

      <li id="menu-catalog">
      <a href="#collapse111" data-toggle="collapse" class="parent collapsed"><i class="fa fa-building"></i> Offerings</a>
       <ul id="collapse111" class="collapse">
     
                
       
                     
                      <li><a href="../offering_heading.html">Heading</a></li>   

                        
       
                     
                      <li><a href="../offerings.html">All Offerings</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse12" data-toggle="collapse" class="parent collapsed"><i class="fa fa-television fw"></i> Design</a>
       <ul id="collapse12" class="collapse">
     
                
       
                     
                      <li><a href="../pages.html">Pages</a></li>   

                        
       
                     
                      <li><a href="../slider.html">Slider</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse14" data-toggle="collapse" class="parent collapsed"><i class="fa fa-home"></i> Home Page</a>
       <ul id="collapse14" class="collapse">
     
                
       
                     
                      <li><a href="../home_heading.html">Heading</a></li>   

                        
       
                     
                      <li><a href="../manage_logo.html">Manage Client Logo</a></li>   

                        
       
                     
                      <li><a href="../founder_note.html">Founder Note</a></li>   

                        
       
                     
                      <li><a href="../flipspaces.html">Why Flipspaces</a></li>   

                        
       
                     
                      <li><a href="../we_do_category.html">How we do category</a></li>   

                        
       
                     
                      <li><a href="../how_we_do.html">How we do</a></li>   

                        
       
                     
                      <li><a href="../our_presence.html">Our Presence</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse22" data-toggle="collapse" class="parent collapsed"><i class="fa fa-bars fw"></i> About</a>
       <ul id="collapse22" class="collapse">
     
                
       
                     
                      <li><a href="../heading.html">Heading</a></li>   

                        
       
                     
                      <li><a href="../technology.html">Technology Revolution</a></li>   

                        
       
                     
                      <li><a href="../map_people.html">Map People</a></li>   

                        
       
                     
                      <li><a href="../team.html">Our  Team Statics</a></li>   

                        
       
                     
                      <li><a href="../vision_backend.html">Vision backed</a></li>   

                        
       
                     
                      <li><a href="../awards.html">Awards</a></li>   

                        
       
                     
                      <li><a href="../stellar.html">stellar multifunctional</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse76" data-toggle="collapse" class="parent collapsed"><i class="fa fa-bars fw"></i> Careers</a>
       <ul id="collapse76" class="collapse">
     
                
       
                     
                      <li><a href="../careers.html">Careers</a></li>   

                        
       
                     
                      <li><a href="../career_heading.html">Heading</a></li>   

                        
       
                     
                      <li><a href="../career_gallery.html">Career Gallery</a></li>   

                        
       
                     
                      <li><a href="../lifeat.html">Life At Flipspaces</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse27" data-toggle="collapse" class="parent collapsed"><i class="fa fa-phone"></i> Contact</a>
       <ul id="collapse27" class="collapse">
     
                
       
                     
                      <li><a href="../contact_heading.html">Heding</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse71" data-toggle="collapse" class="parent collapsed"><i class="fa fa-bars fw"></i> Clientele</a>
       <ul id="collapse71" class="collapse">
     
                
       
                     
                      <li><a href="../clientele_heading.html">Heading</a></li>   

                        
       
                     
                      <li><a href="../clientele.html">All Clientele</a></li>   

                        
       
                     
                      <li><a href="../story.html">Success Story</a></li>   

                        
       
                     
                      <li><a href="../client_reviews.html">Reviews</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse98" data-toggle="collapse" class="parent collapsed"><i class="fa fa-envelope" aria-hidden="true"></i> Enquiry</a>
       <ul id="collapse98" class="collapse">
     
                
       
                     
                      <li><a href="../career_enquiry.html">Career Enquiry</a></li>   

                        
       
                     
                      <li><a href="../enquiry.html">Contact Enquiry</a></li>   

                        
       
                     
                      <li><a href="../investor_enquiry.html">Investor Enquiry</a></li>   

                        
       
                     
                      <li><a href="../vendor_enquiry.html">Vendor Enquiry</a></li>   

                        
       
                     
                      <li><a href="../loan_enquiry.html">Loan Enquiry</a></li>   

                    </ul>

     </li>


  

       

      <li id="menu-catalog">
      <a href="#collapse45" data-toggle="collapse" class="parent collapsed"><i class="fa fa-cog fw"></i> System</a>
       <ul id="collapse45" class="collapse">
     
                
       
                     
                      <li><a href="../store.html">Settings</a></li>   

                        
       
                    
         <li>
          <a href="#collapse47" data-toggle="collapse" class="parent collapsed">Users</a>
          <ul id="collapse47" class="collapse">
            

           <li><a href="../coupon.html">Users</a></li>
            

           <li><a href="../user_group.html">User Group</a></li>
                    </ul>
         </li>

                          
       
                     
                      <li><a href="../menu.html">Backend Menu </a></li>   

                        
       
                     
                      <li><a href="../front_menu.html">Frontend Menu</a></li>   

                    </ul>

     </li>


  

   

    </ul>

 </nav>


<!-- DEBUG-VIEW ENDED 1 APPPATH/Views/admin/header.php -->


<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <!-- <button type="submit" form="form-user" data-toggle="tooltip" title="Save" class="btn btn-primary"><i class="fa fa-save"></i></button> -->
        <a href="coupon.html" data-toggle="tooltip" title="Cancel" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>Users</h1>
      <ul class="breadcrumb">
               <li><a href="../dashboard.html">Home</a></li>
        <li><a href="javascript:void();"> Edit User</a></li>
              </ul>
    </div>
  </div>
  <div class="container-fluid">
        <div class="panel panel-default">
      <div class="panel-heading">
      
              <h3 class="panel-title"><i class="fa fa-pencil"></i>  Edit User</h3>
      </div>
     
     
      <div class="panel-body">
        <form id="updateStatus" method="post" enctype="multipart/form-data" class="form-horizontal">
         <div class="panel-body form-horizontal">
        <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-Couponname">Select Product</label>
            <div class="col-sm-10">
              
              <select class="js-example-basic-multiple form-control" name="products[]" id="products" multiple="multiple">
                  
                </select>
            </div>
          </div>
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-phoneNumber">Coupon Name</label>
            <div class="col-sm-10">
              <input type="text" name="couponName" id="couponName" value="" placeholder="Coupon Name" class="form-control" />
            </div>
          </div>

          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-Couponname">Coupon Code</label>
            <div class="col-sm-10">
              <input type="text" name="couponCode" id="couponCode" value="" placeholder="Coupon Code" class="form-control" />
            </div>
          </div>
      
          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-Couponname">Discount Type</label>
            <div class="col-sm-10">
              <select name="discountType" id="discountType" class="form-control">
                <option value="">Select Discount Type</option>
                <option value="AMOUNT" >Fixed Amount</option>
                <option value="PERCENTAGE" >Percentage</option>
               
              </select>
            </div>
          </div>

          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-lastname">Discount</label>
            <div class="col-sm-10">
              <input type="text" name="value" id="value" value="" placeholder="Discount" class="form-control" />
            </div>
          </div>

          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-email">Minimum Amount</label>
            <div class="col-sm-10">
              <input type="text" name="minValue" id="minValue" value="" placeholder="Minimum Amount" class="form-control" />
            </div>
          </div>

           <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-email">Start Date</label>
            <div class="col-sm-10">
              <input type="date" name="startDate" id="startDate" value="" placeholder="E-Mail" class="form-control" />
            </div>
          </div>

           <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-email">End Date</label>
            <div class="col-sm-10">
              <input type="date" name="endDate" id="endDate" value="" placeholder="E-Mail" class="form-control" />
            </div>
          </div>

         

          <div class="form-group required">
            <label class="col-sm-2 control-label" for="input-Couponname">Status</label>
            <div class="col-sm-10">
              <select name="active" id="active" class="form-control">
                <option value="">Select Status</option>
                <option value="1" >Active</option>
                <option value="0" >Inactive</option>
               
              </select>
            </div>
          </div>

          

            <div class="text-right">
            <button type="submit" class="btn btn-primary" ><i class="fa fa-key"></i> Update</button>
          </div>

        </form>
      </div>
    </div>
  </div>
</div>

<!-- DEBUG-VIEW START 2 APPPATH/Views/admin/footer.php -->
<script type="text/javascript" src="../assets/backend/javascript/summernote/summernote.js"></script>
<link href="../assets/backend/javascript/summernote/summernote.css" rel="stylesheet" />
<script type="text/javascript" src="../assets/backend/javascript/summernote/summernote-image-attributes.js"></script>
<script type="text/javascript" src="../assets/backend/javascript/summernote/opencart.js"></script>
<script type="text/javascript" src="../assets/frontend/js/toastr.min.js"></script>

<script type="text/javascript">
   
  $(document).ready(function() {
      if (!localStorage.getItem("token")) window.location.href = './../admin_console.html';
      getProducts();      
  });
    $(document).ready(function() {
    $('.js-example-basic-multiple').select2({
        tags: true,
        maximumSelectionLength: 3

    });
});
   function getProducts()
  {
  
    $.ajax({
          url: localStorage.getItem("BASE_URL")+"/product?limit=1000",
          headers: {
            authorization: localStorage.getItem("token")
          },
          type: "GET",
          data : '',
          success: function(response) {
            let responseData = {};
            (response.result || []).forEach((row, i) => {
              responseData += `<option value="${row._id}">${row.name || ''}</option>`;
            });
              
              $('#products').append(responseData);
        setTimeout(function(){
           getDiscount();
         }, 1000);
              
          },
          error: function(data) {
              console.log(data);
          }
      });
  }

  function getDiscount() {
      var url = new URLSearchParams(window.location.search);
      let discountId = url.get("id");
      $.ajax({
          url: localStorage.getItem("BASE_URL")+"/discount?_id="+discountId,
          headers: {
            authorization: localStorage.getItem("token")
          },
          type: "GET",
          success: function(response) {
            $('.js-example-basic-multiple').select2();
            let row = (response.result || [])[0] || {};
            let products = new Array();
            
            for (var i = 0; i < row.products.length; i++) {
                products.push(row.products[i]._id);
               
                }
           
           
            $('#couponName').val(row.couponName || '');
            $('#couponCode').val(row.couponCode || '');
            $('#discountType').val(row.discountType || '');
            $('#value').val(row.value || '');
            $('#minValue').val(row.minValue || '');
            $('#products').val(products || '');
            $('#startDate').val(moment(row.startDate).format("YYYY-MM-DD") || '');
            $('#endDate').val(moment(row.endDate).format("YYYY-MM-DD")|| '');
            $('#active').val(row.active == true?'1':'0' || '');
            $('#products').trigger('change');
             // console.log(products)
            
          },
          error: function(data) {
              console.log(data);
          }
      });
  }


  $('#updateStatus').on('submit',(function(e) {
        e.preventDefault();
     var url = new URLSearchParams(window.location.search);
      let userId = url.get("id");
    
   let products = new Array($("#products").val());

      let data = {
        couponName: $('#couponName').val(),
        couponCode: $('#couponCode').val(),
        discountType: $('#discountType').val(),
        value: $('#value').val(),
        minValue: $('#minValue').val(),
        products: products,
        startDate: moment($('#startDate').val()).valueOf(),
        endDate: moment($('#endDate').val()).valueOf(),
        active: $('#active').val()==1?true:false
      };
        $.ajax({ 
            url: localStorage.getItem("BASE_URL")+"/discount/"+userId,
            type:'PUT',
            headers: {
           authorization: localStorage.getItem("token")
         },
           data:data,
                              
            success:function(response){
               if (response.error) alert(response.error);
            else {
              alert("Successfully Status Update!")
              window.location.href = './edit_coupon.html?id='+userId;
            }
            },
           error: function(response) {
              console.log(response);
          }
    })
  })
  );

</script>

<footer id="footer"><a href="#">Cyberworx</a> &copy; 2019-2022 All Rights Reserved.</footer></div>
<style>
    .toast-top-right .toast {
    background-color: #1d1d1d !important;
    box-shadow: 0 0 12px #484848 !important;
    border: 1px solid #3a3a3a;
}
</style>
</body>

</html>

